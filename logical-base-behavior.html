<script>
Polymer.LogicalBaseBehavior = {
	_any: function() {
		for(var i in arguments) {
			if(arguments[i]) return true;
		}
		return false;
	},
	_all: function() {
		for(var i in arguments) {
			if(!arguments[i]) return false;
		}
		return true;
	},
	_data: function(attr, returnElement) {
		var target = event.target;
		attr = attr.toLowerCase();
		while(target) {
			if(target.dataset && target.dataset[attr]) {
				return returnElement ? target : target.dataset[attr];
			}
			target = target.parentElement;
		}
		return false;
	},
	_dec: function() {
		var path = this._data('path');
		var dec = this[path] ? parseInt(this[path]) - 1 : -1;
		this.set(path, dec);
	},
	_empty: function() {
		return !arguments[0] || arguments[0].length == 0;
	},

	_focusID: function(id) {
	
		if(typeof id != 'string')
			var id = this._data('id');

		this._focus(this.$[id]);
	},
	

	_has: function() {
		
		var a = (typeof arguments[0] == 'string') ? arguments[0].split(',') : arguments[1];

		return a.indexOf(arguments[1]) > -1;
	},
	
	_inc: function() {
		var path = this._data('path');
		var inc = this[path] ? parseInt(this[path]) + 1 : 1;
		this.set(path, inc);
	},

	// true if any arg(n) = arg(n+1)
	_isa: function() {
		if(arguments.length % 2 != 0) {
			console.log("ERROR! odd number of arguments!");
			return false;
		}

		for (var i = 0; i < arguments.length; i+=2) {
			if(arguments[i] == arguments[i + 1])
				return true;
		};

		return false;
	},
	
	
	// true if ALL arg(n) = arg(n+1)
	_isA: function() {
		if(arguments.length % 2 != 0) {
			console.log("ERROR! odd number of arguments!");
			return false;
		}

		for (var i = 0; i < arguments.length; i+=2) {
			if(arguments[i] != arguments[i + 1])
				return false;
		};

		return true;
	},
	
	
	// true if any arguements equeal arg0
	_is: function() {

		for (var i = 1; i < arguments.length; i++) {
			if(arguments[0] == arguments[i])
				return true;
		};

		return false;
	},

	// is greater than
	_isgt: function() {

		return Number(arguments[0]) > Number(arguments[1]);
	},

	// is less than
	_islt: function() {

		return Number(arguments[0]) < Number(arguments[1]);
	},
	// is between
	_isb: function() {
	
		return Number(arguments[0]) <= Number(arguments[2]) && Number(arguments[0]) >= Number(arguments[1]);
	},

	// true if path (arg1) of arg0 equals arg2
	_isp: function() {
		var path = arguments[1];
		return arguments[0][path] && arguments[0][path] == arguments[2];	
	},
	
	

	_isOr: function() {
		return arguments[0] == arguments[1] || arguments[0] == arguments[2];
	},
	// returns true if it is more than
	_ismore: function() {
		return arguments[0] > arguments[1];
	},
	// returns true if arg1 does not equal arg2
	_isnot: function() {
		return arguments[0] != arguments[1];
	},
	// returns all the arguments as a string separated by a space
	_concat: function() {
		var args = [];
		for(a in arguments) {
			args.push(arguments[a]);
		}
		return args.join('');
	},
	_if: function() {
		return arguments[0] == arguments[1] ? arguments[2] : arguments[3];
	},
	// returns the length of something
	lengthof: function() {
		return arguments[0].length;
	},
	_focus: function( element ) {

		var input,
				highlight,
				isMenu,
				isDate;

		switch(element.tagName.toLowerCase()) {
			case 'paper-input':
			case 'gold-phone-input':
				input = element.$.input;
				if(element.type == 'date') isDate = true;
			break;
			case 'paper-textarea':
				input = element.$.input.$.textarea;
			break;
			case 'paper-dropdown-menu':
				input = element;
				isMenu = true;
			break;
			default:
				input = element;
		}

		if(isMenu) {
			input.open();
		} else if(isDate) {
			this.async(function(){
				var ev = document.createEvent('KeyboardEvent');
				ev.initKeyboardEvent('keydown', true, true, document.defaultView, 'F4', 0);
				input.dispatchEvent(ev);
			},250);
		} else {
			input.focus();
		}

		if(element.getAttribute('auto-highlight') != undefined) {
			input.select();
		}

	},

	_ms: function() {

		var v = Number(arguments[0]);	
		for (var i = 1; i < arguments.length; i++) {
			v = v - Number(arguments[i]);
		};
		return v;
	},
	
	_preventDefault: function() {
		event.preventDefault();
	},
	_null: function() {
		
	},
	// asserts only one property can be true
	onlyOne: function(a, b, c) {
		console.log("event",event);
		console.log("c",c);
		if(a && b) {
			a = false;
			b = false;
		}
	},
	_url: function(suburl) {
		return window.location.origin + '/' + suburl.join('/');
	},
	_set: function() {
		var target = this._data('path', 1);
		var path = target.dataset.path;
		var val = target.dataset.val == 'true' ? true : target.dataset.val == 'false' ? false : target.dataset.val;
		this.set(path, val);

		if(target.dataset.secondpath) {
			this.set(target.dataset.secondpath, val);
		}

		if(this._data('closeme'))
			this.dialogClose();
	},
	_stopPropagation: function() {
	
		event.stopPropagation();
	},
	
	_sqlbool: function(bool) {
		return bool == 1;
	},
	_tag: function(query) {
		var query = query.toLowerCase();
		var target = event.target;
		while(target) {
			if (target.tagName.toLowerCase() == query) {
				return target;
			}
			target = target.parentElement;
		}
	},
	// returns the target containing the query
	_target: function(query, type) {
		var target = event.target;
		var type = type || 'data';
		switch(type) {
			case 'data':
				query = query.toLowerCase();
				while(target) {
					// return when found
					if (target.dataset && target.dataset[query])
						return target;

					// try the parent
					target = target.parentElement;
				}
			break;
			case 'tag':
				// standardize tag
				var tag = query.toUpperCase();
				// look through targets
				while(target) {
					// return when found
					if(target.tagName == tag)
						return target;
					// try parent
					target = target.parentElement;
				}
			break;
		}
		return false;
	},
	_today: function( deltaDays, weekday ) {

		var mDate = new Date();

		var deltaDays = deltaDays || 0;

		if(weekday) {
			var deltaDayOfWeek = (mDate.getDay() + deltaDays) % 7;
			if( deltaDayOfWeek == 0 ) {
				if(deltaDays < 0) deltaDays -=  2;
				if(deltaDays > 0) deltaDays++;
			} else if ( deltaDayOfWeek == 6 ) {
				if(deltaDays < 0) deltaDays--;
				if(deltaDays > 0) deltaDays += 2;
			}
		}

		mDate.setDate(mDate.getDate() + deltaDays);

		var dd = mDate.getDate();
		var mm = mDate.getMonth() + 1;
		var yyyy = mDate.getFullYear();

		if(mm < 10) mm = '0' + mm;
		if(dd < 10) dd = '0' + dd;

		return yyyy + '-' + mm + '-' + dd;

	},
	_toggle: function(path) {

		var path = typeof path == 'string' ? path : this._data('path');
		var pathArray = path.split('.');
		var obj = this;
		for (var i = 0; i < pathArray.length; i++) {
			var level = pathArray[i];
			obj = obj[level]
		};

		if(!obj || obj == 0) {
			var bool = 1;
		} else {
			var bool = 0;
		}

		this.set(path, bool);
	},
	
};
</script>
